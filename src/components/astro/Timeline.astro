---
import { Briefcase, GraduationCap, MapPin, Calendar } from 'lucide-react';

const { lang = 'en' } = Astro.props;

const translations = {
  fr: {
    title: "Mon Parcours",
    subtitle: "De la classe préparatoire à l'ingénierie, avec des expériences en IA et développement.",
    educationTitle: "Formation",
    internshipsTitle: "Stages",
    upcoming: "À venir",
    education: [
      {
        name: "Università di Trento",
        location: "Italie",
        period: "Fév - Juin 2025",
        detail: "Erasmus",
        icon: "trento.png",
        description: [
          "Cours spécialisés en data science et intelligence artificielle"
        ]
      },
      {
        name: "École Centrale de Lille",
        location: "Lille",
        period: "2023 - 2027",
        detail: "Ingénieur généraliste",
        icon: "centrale.png",
        description: [
          "Formation généraliste avec projets en data science et gestion de projet",
          "Projet NLP/LLM avec le SIB pour l'aide à la décision clinique"
        ]
      },
      {
        name: "Lycée Kléber",
        location: "Strasbourg",
        period: "2021 - 2023",
        detail: "PCSI → PC*",
        icon: "kleber.png",
        description: [
          "Spécialisation en Physique et Mathématiques",
          "Préparation théorique et pratique aux concours"
        ]
      }
    ],
    internships: [
      {
        date: "Mars - Juil 2026",
        title: "Stagiaire IA - RAG",
        company: "MBDA",
        companyUrl: "https://www.mbda-systems.com/country-fr?rc=1",
        location: "France",
        upcoming: true,
        description: [
          "Développement d'une solution RAG"
        ]
      },
      {
        date: "Sept 2025 - Fév 2026",
        title: "Stagiaire IA & Automatisation",
        company: "Prevision",
        companyUrl: "https://prepa-prevision.fr/",
        location: "Paris",
        upcoming: false,
        description: [
          "Développement fullstack d'outils d'aide à l'orientation",
          "Fine-tuning d'IA à des fins éducatives",
          "Automatisation de processus avec n8n"
        ]
      },
      {
        date: "Jan - Fév 2024",
        title: "Stagiaire Technicien R&D",
        company: "Ricoh Industrie France",
        companyUrl: "https://www.ricoh-thermal.com/fr/",
        location: "Wettolsheim",
        upcoming: false,
        description: [
          "Tests et analyses des performances produits",
          "Caractérisation des matériaux",
          "Gestion et interprétation des données expérimentales"
        ]
      }
    ]
  },
  en: {
    title: "My Journey",
    subtitle: "From preparatory classes to engineering school, with experience in AI and development.",
    educationTitle: "Education",
    internshipsTitle: "Internships",
    upcoming: "Upcoming",
    education: [
      {
        name: "Università di Trento",
        location: "Italy",
        period: "Feb - June 2025",
        detail: "Erasmus",
        icon: "trento.png",
        description: [
          "Specialized courses in data science and artificial intelligence"
        ]
      },
      {
        name: "École Centrale de Lille",
        location: "Lille",
        period: "2023 - 2027",
        detail: "General Engineering",
        icon: "centrale.png",
        description: [
          "Generalist training with projects in data science and project management",
          "NLP/LLM project with SIB for clinical decision support"
        ]
      },
      {
        name: "Lycée Kléber",
        location: "Strasbourg",
        period: "2021 - 2023",
        detail: "PCSI → PC*",
        icon: "kleber.png",
        description: [
          "Specialization in Physics and Mathematics",
          "Theoretical and practical preparation for competitive exams"
        ]
      }
    ],
    internships: [
      {
        date: "Mar - Jul 2026",
        title: "AI Intern - RAG",
        company: "MBDA",
        companyUrl: "https://www.mbda-systems.com/country-fr?rc=1",
        location: "France",
        upcoming: true,
        description: [
          "Development of a RAG solution"
        ]
      },
      {
        date: "Sept 2025 - Feb 2026",
        title: "AI & Automation Intern",
        company: "Prevision",
        companyUrl: "https://prepa-prevision.fr/",
        location: "Paris",
        upcoming: false,
        description: [
          "Fullstack development of orientation tools for students",
          "AI fine-tuning for educational purposes",
          "Process automation with n8n"
        ]
      },
      {
        date: "Jan - Feb 2024",
        title: "R&D Technician Intern",
        company: "Ricoh Industrie France",
        companyUrl: "https://www.ricoh-thermal.com/fr/",
        location: "Wettolsheim",
        upcoming: false,
        description: [
          "Product performance testing and analysis",
          "Material characterization",
          "Management and interpretation of experimental data"
        ]
      }
    ]
  }
};

const t = translations[lang] || translations.fr;
---

<section class="py-12 md:py-16 animate-on-scroll">
  <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="mb-12">
      <h2 class="text-3xl font-bold text-foreground mb-4">{t.title}</h2>
      <p class="text-foreground-secondary">
        {t.subtitle}
      </p>
    </div>

    <div class="relative grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-16">
      <!-- Vertical divider -->
      <div class="hidden lg:block absolute left-1/2 top-0 bottom-0 w-px bg-gradient-to-b from-transparent via-border to-transparent"></div>

      <!-- Formation -->
      <div class="lg:pr-8">
        <h3 class="text-xl font-semibold text-foreground mb-6 flex items-center gap-2">
          <GraduationCap className="w-5 h-5 text-purple-500" />
          {t.educationTitle}
        </h3>

        <div class="relative space-y-6 before:absolute before:inset-0 before:ml-6 before:-translate-x-px before:h-full before:w-0.5 before:bg-gradient-to-b before:from-purple-500 before:via-border before:to-transparent">
          {t.education.map((item) => (
            <div class="relative flex items-start">
              <!-- Icon -->
              <div class="w-12 h-12 rounded-lg bg-background border-2 border-purple-500/50 flex items-center justify-center shrink-0 overflow-hidden z-10">
                <img
                  src={`/assets/schools/${item.icon}`}
                  alt={item.name}
                  class="w-10 h-10 object-contain"
                  onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';"
                />
                <GraduationCap className="w-6 h-6 text-purple-500 hidden" />
              </div>

              <!-- Connector -->
              <div class="w-4 h-0.5 mt-5 bg-gradient-to-r from-purple-500/50 to-purple-500/20 shrink-0"></div>

              <!-- Content -->
              <div class="flex-1 p-4 rounded-xl border border-border bg-background-secondary">
                <div class="flex items-start justify-between gap-2 mb-1">
                  <h4 class="font-semibold text-foreground">{item.name}</h4>
                  <span class="text-xs text-foreground-secondary whitespace-nowrap">{item.period}</span>
                </div>
                <p class="text-sm text-purple-500 mb-1">{item.detail}</p>
                <p class="text-xs text-foreground-secondary flex items-center gap-1 mb-2">
                  <MapPin className="w-3 h-3" />
                  {item.location}
                </p>
                <ul class="space-y-1">
                  {item.description.map((desc) => (
                    <li class="text-sm text-foreground-secondary leading-relaxed flex items-start gap-2">
                      <span class="mt-1.5 w-1 h-1 rounded-full bg-foreground-secondary/50 shrink-0"></span>
                      {desc}
                    </li>
                  ))}
                </ul>
              </div>
            </div>
          ))}
        </div>
      </div>

      <!-- Stages avec Timeline -->
      <div class="lg:pl-8">
        <h3 class="text-xl font-semibold text-foreground mb-6 flex items-center gap-2">
          <Briefcase className="w-5 h-5 text-accent" />
          {t.internshipsTitle}
        </h3>

        <div class="relative space-y-6 before:absolute before:inset-0 before:ml-5 before:-translate-x-px before:h-full before:w-0.5 before:bg-gradient-to-b before:from-accent before:via-border before:to-transparent">
          {t.internships.map((item) => (
            <div class="relative flex items-start">
              <!-- Timeline dot -->
              <div class={`flex items-center justify-center w-10 h-10 rounded-full border-2 bg-background shrink-0 z-10 ${item.upcoming ? 'border-accent animate-pulse-glow' : 'border-border'}`}>
                <Briefcase className={`w-4 h-4 ${item.upcoming ? 'text-accent' : 'text-foreground-secondary'}`} />
              </div>

              <!-- Connector -->
              <div class={`w-4 h-0.5 mt-4 shrink-0 ${item.upcoming ? 'bg-gradient-to-r from-accent/50 to-accent/20' : 'bg-gradient-to-r from-border/80 to-border/30'}`}></div>

              <!-- Content -->
              <div class={`flex-1 p-4 rounded-xl border transition-colors ${item.upcoming ? 'border-accent/50 bg-accent/5 shadow-lg shadow-accent/10' : 'border-border bg-background-secondary'}`}>
                <div class="flex items-center gap-2 mb-2">
                  {item.upcoming && (
                    <span class="text-[10px] font-semibold px-2 py-0.5 rounded-full bg-accent text-white uppercase">
                      {t.upcoming}
                    </span>
                  )}
                  <span class="text-xs text-foreground-secondary flex items-center gap-1">
                    <Calendar className="w-3 h-3" />
                    {item.date}
                  </span>
                </div>

                <h4 class="font-semibold text-foreground">{item.title}</h4>
                {item.companyUrl ? (
                  <a
                    href={item.companyUrl}
                    target="_blank"
                    rel="noopener noreferrer"
                    class="text-sm text-accent hover:text-accent-hover hover:underline transition-colors"
                  >
                    {item.company}
                  </a>
                ) : (
                  <p class="text-sm text-accent">{item.company}</p>
                )}
                <p class="text-xs text-foreground-secondary flex items-center gap-1 mt-1 mb-2">
                  <MapPin className="w-3 h-3" />
                  {item.location}
                </p>

                <ul class="space-y-1">
                  {item.description.map((desc) => (
                    <li class="text-sm text-foreground-secondary leading-relaxed flex items-start gap-2">
                      <span class="mt-1.5 w-1 h-1 rounded-full bg-foreground-secondary/50 shrink-0"></span>
                      {desc}
                    </li>
                  ))}
                </ul>
              </div>
            </div>
          ))}
        </div>
      </div>
    </div>
  </div>
</section>
